<odoo>
    <data>

        <!-- Form -->
        <record id="view_products_competitors_form" model="ir.ui.view">
            <field name="name">Товары конкурентов</field>
            <field name="model">ozon.products_competitors</field>
            <field name="arch" type="xml">
                <form>
                    <div name="button_box" position="inside">
                        <button class="oe_stat_button" type="object" name="get_price_competitors">
                            <field string="История цен конкурентов"
                                name="get_price_competitors_count" widget="statinfo" />
                        </button>
                    </div>
                    <notebook>
                        <page id="page_info_competitors_history"
                            string="Информация о товаре конкурента">
                            <group>
                                <field name="competitor_seller_id" />
                                <field name="id_product" />
                                <field name="name" />
                                <field name="product" />
                                <field name="article" />
                                <field name="url" widget="url" readonly="1" />
                                <field name="market_share" readonly="1"
                                    attrs="{'invisible': [('market_share_is_computed', '=', False)]}"
                                />
                                <field name="market_share_is_computed" invisible="1" />
                            </group>
                        </page>
                        <page id="page_product_competitors_promotion_info" string="Продвижение">
                            <separator string="Поисковые запросы" />
                            <field name="tracked_search_query_ids">
                                <tree>
                                    <field name="name" />
                                </tree>
                            </field>
                        </page>
                        <page id="page_graph_history" string="Аналитические данные">
                            <group>
                                <field name="imgs_graph_this_year"
                                    readonly="1" widget="image"
                                />
                                <field name="imgs_data_graph_this_year" invisible="1" />
                            </group>
                            <button string="Скачать данные"
                                type="object"
                                class="oe_highlight"
                                icon="fa-download"
                                name="download_data_graph_this_year"
                                attrs="{'invisible': [('imgs_data_graph_this_year', '=', False)]}"
                            />
                        </page>
                    </notebook>
                </form>
            </field>
        </record>


        <!-- Tree -->
        <record id="view_products_competitors_tree" model="ir.ui.view">
            <field name="name">Товары конкурентов</field>
            <field name="model">ozon.products_competitors</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="id_product" string="Id товара на Ozon" />
                    <field name="competitor_seller_id" string="Продавец" />
                    <field name="name" string="Наименование товара" />
                    <field name="market_share" readonly="1" />
                    <field name="product" string="Лот" />
                </tree>
            </field>
        </record>

        <!-- Actions -->
        <record model="ir.actions.server" id="action_draw_plot_competitors_products">
            <field name="name">Рассчитать "Аналитические данные"</field>
            <field name="model_id" ref="model_ozon_products_competitors" />
            <field name="binding_model_id" ref="model_ozon_products_competitors" />
            <field name="state">code</field>
            <field name="code">
                action = records.draw_plot()
            </field>
        </record>

        <!-- Search -->
        <record id="view_ozon_products_competitors_search" model="ir.ui.view">
            <field name="name">Товары конкурентов</field>
            <field name="model">ozon.products_competitors</field>
            <field name="arch" type="xml">
                <search>
                    <field name="article" />
                </search>
            </field>
        </record>

        <!-- Action -->
        <record model="ir.actions.act_window" id="action_products_competitors">
            <field name="name">Товары конкурентов</field>
            <field name="res_model">ozon.products_competitors</field>
            <field name="view_mode">tree,form</field>
        </record>

    </data>
</odoo>