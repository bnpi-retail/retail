<odoo>
    <data>

        <!-- Form -->
        <record id="view_categories_form" model="ir.ui.view">
            <field name="name">Основная категория</field>
            <field name="model">ozon.categories</field>
            <field name="arch" type="xml">
                <form>
                    <notebook>
                        <page string="Основная информация">
                            <group>
                                <field name="c_id" />
                                <field name="name_categories" />
                                <field name="category_manager" />
                            </group>
                        </page>

                        <page string="Аналитические данные">
                            <group>
                                <field name="img_html_sale_this_year"/>
                                <field name="img_data_sale_this_year" invisible="1"/>
                                <field name="img_data_sale_last_year" invisible="1"/>
                                <field name="img_data_analysis_data_this_year" invisible="1"/>
                            </group>
                            <button string="Скачать данные" 
                                type="object" 
                                class="oe_highlight" 
                                icon="fa-download" 
                                name="download_data_sale_this_year"
                                attrs="{'invisible': [('img_data_sale_this_year', '=', False)]}"
                            />
                            
                            <group>
                                <field name="img_html_sale_last_year" />
                            </group>
                            <button string="Скачать данные" 
                                type="object" 
                                class="oe_highlight" 
                                icon="fa-download" 
                                name="download_data_sale_last_year"
                                attrs="{'invisible': [('img_data_sale_last_year', '=', False)]}"
                            />

                            <group>
                                <field name="img_html_analysis_data_this_year" />
                            </group>
                            <button string="Скачать данные" 
                                type="object" 
                                class="oe_highlight" 
                                icon="fa-download" 
                                name="download_data_analysis_data_this_year"
                                attrs="{'invisible': [('img_data_analysis_data_this_year', '=', False)]}"
                            />
                                
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <!-- Tree -->
        <record id="view_main_categories_tree" model="ir.ui.view">
            <field name="name">Основные категории</field>
            <field name="model">ozon.categories</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="name_categories" />
                </tree>
            </field>
        </record>

        <!-- Action -->
        <record model="ir.actions.act_window" id="action_main_categories">
            <field name="name">Основные категории</field>
            <field name="res_model">ozon.categories</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.server" id="action_draw_graphs_for_categores">
            <field name="name">Рассчитать "Аналитические данные"</field>
            <field name="model_id" ref="model_ozon_categories" />
            <field name="binding_model_id" ref="model_ozon_categories" />
            <field name="state">code</field>
            <field name="code">
                records.action_draw_graphs_by_categories()
            </field>
        </record>

        <!-- Menu -->
        <menuitem name="Основные категории"
            id="menu_main_categories"
            parent="menu_categories"
            action="action_main_categories"
            sequence="25" />

    </data>
</odoo>