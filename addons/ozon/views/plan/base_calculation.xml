<odoo>
    <data>
        <!-- Base calculation Form -->
        <record id="ozon_base_calculation_view_form" model="ir.ui.view">
            <field name="name">Плановая структура затрат</field>
            <field name="model">ozon.base_calculation</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="price_component_id"
                            string="Плановая статья" />
                        <field name="value" string="Значение плановой статьи" optional="hide" />
                        <!-- attrs="{'readonly': [('kind','=','depends_on_volume')]}" -->
                        <field name="kind" />
                        <field name="percent" string="Процент от плановой цены"
                            widget="percentage" />
                        <field name="value_based_on_price" sum="1" />
                        <field name="comment" optional="hide" />
                    </group>
                </form>
            </field>
        </record>

        <!-- Base calculation Tree -->
        <record id="ozon_base_calculation_view_tree" model="ir.ui.view">
            <field name="name">Плановая структура затрат</field>
            <field name="model">ozon.base_calculation</field>
            <field name="arch" type="xml">
                <tree>
                    <field name="price_component_id"
                        string="Плановая статья" />
                    <field name="value" string="Значение плановой статьи"
                        attrs="{'readonly': [('kind','=','depends_on_volume')]}"
                        optional="hide" />
                    <field name="kind" />
                    <field name="percent" string="Процент от плановой цены"
                        widget="percentage" />
                    <field name="value_based_on_price" sum="1" />
                    <field name="comment" optional="hide" />
                </tree>
            </field>
        </record>


        <!-- Base calculation template Form -->
        <record id="ozon_base_calculation_template_view_form" model="ir.ui.view">
            <field name="name">Шаблон назначения планового расчёта</field>
            <field name="model">ozon.base_calculation_template</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="name" />
                        <field name="base_calculation_ids">
                            <tree editable="bottom" edit="True">
                                <field name="price_component_id" string="Плановая статья" />
                                <field name="kind" />
                                <field name="value" string="Значение"
                                    attrs="{'invisible': [('comment', '!=', False)]}" />
                                <field name="comment" />
                            </tree>
                        </field>
                    </group>
                </form>
            </field>
        </record>

        <!-- Action Base calculation -->
        <!-- <record model="ir.actions.act_window" id="action_base_calculation">
            <field name="name">Шаблоны планового расчёта</field>
            <field name="res_model">ozon.base_calculation</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('id','=',0)]</field>
        </record> -->

        <!-- Action Base calculation template -->
        <record model="ir.actions.act_window" id="action_base_calculation_template">
            <field name="name">Шаблоны планового расчёта</field>
            <field name="res_model">ozon.base_calculation_template</field>
            <field name="view_mode">tree,form</field>
        </record>


        <!-- Base calculation wizard - Form -->
        <record id="ozon_base_calculation_wizard_view_form" model="ir.ui.view">
            <field name="name">Wizard - Шаблон назначения планового расчёта</field>
            <field name="model">ozon.base_calculation_wizard</field>
            <field name="arch" type="xml">
                <form>
                    <group>
                        <field name="base_calculation_template_id" />
                    </group>
                    <footer>
                        <button string="Отмена" class="btn-secondary" special="cancel" />
                        <button name="apply_to_products" string="Применить" type="object"
                            class="btn-primary" />
                    </footer>
                </form>
            </field>
        </record>

    </data>
</odoo>