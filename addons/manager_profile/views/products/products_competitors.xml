<odoo>
  <data>

    <!-- Form -->
    <record id="view_parser_products_competitors_form" model="ir.ui.view">
        <field name="name">Собранные товары</field>
        <field name="model">parser.products_competitors</field>
        <field name="arch" type="xml">
            <form>
                <group string="Рекомендуемый наш товар">
                    <field name="is_processed" widget="badge"
                        decoration-success="is_processed=='complete'"
                        decoration-warning="is_processed=='not_complete'"
                        decoration-danger="is_processed=='product_not_assigned'"
                    />
                    <field name="product"/>
                    <field name="is_our_product"/>
                </group>
                <group string="Информация карточки">
                    <field name="number"/>
                    <field name="name"/>
                    <field name="search_query"/>
                    <field name="seller"/>
                    <field name="id_product"/>
                    <field name="price"/>
                    <field name="price_without_sale"/>
                    <field name="price_with_card"/>
                </group>
                <field name="url" widget="url" readonly="1" nolabel="1" text="Перейти к товару"/>
            </form>
        </field>
    </record>

    <!-- Tree -->
    <record id="view_parser_products_competitors_tree" model="ir.ui.view">
        <field name="name">Собранные товары</field>
        <field name="model">parser.products_competitors</field>
        <field name="arch" type="xml">
            <tree>
                <field name="number"/>
                <field name="name"/>
                <field name="seller"/>
                <field name="id_product"/>
                <field name="price"/>
                <field name="price_without_sale"/>
                <field name="price_with_card"/>
                <field name="is_processed" widget="badge"
                    decoration-success="is_processed=='complete'"
                    decoration-warning="is_processed=='not_complete'"
                    decoration-danger="is_processed=='product_not_assigned'"
                />
            </tree>
        </field>
    </record>

    <!-- Search -->
    <record model="ir.ui.view" id="view_parser_products_competitors_search">
        <field name="name">Собранные товары</field>
        <field name="model">parser.products_competitors</field>
        <field name="type">search</field>
        <field name="arch" type="xml">
            <search>
                <filter string="Товары без назначенного продукта" name="items_without_product" domain="[('is_processed','=','product_not_assigned')]"/>
                <filter string="Необработанные товары" name="unprocessed_goods" domain="[('is_processed','=','not_complete')]"/>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record model="ir.actions.act_window" id="action_parser_products_competitors">
        <field name="name">Собранные товары</field>
        <field name="res_model">parser.products_competitors</field>
        <field name="view_mode">tree,form,search</field>
        <field name="context">{'search_default_items_without_product': 1, 'search_default_unprocessed_goods': 1}</field>
    </record>

    <record model="ir.actions.server" id="action_create_ozon_products">
        <field name="name">Создать товары конкурентов</field>
        <field name="model_id" ref="model_parser_products_competitors" />
        <field name="binding_model_id" ref="model_parser_products_competitors" />
        <field name="state">code</field>
        <field name="code">
            records.create_ozon_product()
        </field>
    </record>

    <!-- Menu -->
    <menuitem name="Собранные товары" 
        id="parser_menu_product_competitors"
        parent="manager_profile.menu_root"
        action="action_parser_products_competitors"
        sequence="35"/>

  </data>
</odoo>